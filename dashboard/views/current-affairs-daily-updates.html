<div id="needs-focus" class="template-container" ng-keydown="keyPressed($event)" tabindex="0">
    <div class="navbar-top">
        <div class="navbar-headers active">
            DAILY UPDATES
        </div>
        <div class="navbar-headers" ng-click="travel('Monthly Digest')">
            MONTHLY DIGEST
        </div>
        <div class="navbar-headers" ng-click="travel('Quiz')">
            QUIZ
        </div>
        <div style="cursor: pointer; float: right; padding-right: 12px;" ng-show="user.userInfo.loggedIn">
            <div class="dropdown">
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" style="border: none; background-color: rgba(0, 0, 0, 0); color: white; height: 24px;" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
                    <li><a role="button" tabindex="0" class="dropdown-labels">Profile</a></li>
                    <li><a role="button" tabindex="0" class="dropdown-labels" ng-click="logout()">Logout</a></li>
                </ul>
            </div>
        </div>
        <div class="user-greeting" ng-show="user.userInfo.loggedIn">
            Hi, {{user.getFirstName()}}
        </div>
        <div style="cursor: pointer; float: right; padding-right: 12px;" ng-show="!user.userInfo.loggedIn">
            <button class="btn btn-warning" ng-click="$parent.showLoginModal('login', 'nowhere')">Login/Sign Up</button>
        </div>
    </div>
    <div id="news-update-main" style="z-index: 200;">
        <div style="height: 24px;"></div>
        <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner" role="listbox">
                <div class="item" ng-repeat="newsUpdate in newsUpdates track by $index" ng-class="{'active': newsIndexToBeCompared == $index}">
                    <div class="row" style="margin: 0px; padding: 0px;">
                        <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3" style="padding: 5px 0px 5px 0px;">
                            <div class="news-card">
                                <div ng-style="{'background-image': 'url(' + newsUpdate.imageMobile + ')'}" style="width: 100%; height: 100px; background-size: cover; background-position: center; border-radius: 2px 2px 0px 0px;">
                                    <div class="gradientBackground" style="height: 100%; width: 100%; border-radius: 2px 2px 0px 0px;">
                                        <div style="height:28px; background-color: rgba(0, 0, 0, 0); border-radius: 2px 2px 0px 0px;"></div>
                                        <div class="news-heading">{{newsUpdate.content[viewingLang.current].heading}}</div>
                                    </div>
                                </div>
                                <div style="width: 100%; height: 280px; overflow-y: scroll; padding: 24px 24px 6px 24px;">
                                    <p class="news-points" ng-repeat="point in newsUpdate.content[viewingLang.current].points track by $index" ng-class="{ 'no-bottom-margin': $index == newsUpdate.content[viewingLang.current].points.length-1 }">{{$index+1}}. <span ng-bind-html="prettify(point)"></span></p>
                                </div>
                                <div class="news-card-toolbar">
                                    <img src="./resources/back-to-top.svg" style="float: left; vertical-align: middle; padding-top: 10px; cursor:pointer;" ng-click="backToTop()">
                                    <img src="./resources/share.svg" style="float: right; vertical-align: middle; padding-top: 8px; cursor:pointer;">
                                    {{$index+1-fetchInfo[newsUpdate.dateString].total}}/{{fetchInfo[newsUpdate.dateString].len}} from {{getDateObj(newsUpdate.dateString) | date:'d MMM'}}
                                </div>
                            </div>
                        </div>
                    </div>  
                </div>
                
                <div class="item" ng-class="{'active': newsIndexToBeCompared == newsUpdates.length}">
                    <div class="row" style="margin: 0px; padding: 0px;">
                        <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3">
                            <div class="news-card">
                                <div ng-show=" fetchingStatus == 0 ">Error
                                    <button class="btn btn-primary">Try again</button>
                                </div>
                                <div ng-show=" fetchingStatus == 1 ">fetching</div>
                                <div ng-show=" fetchingStatus == 2 ">Should not see.</div>
                                <div ng-show=" fetchingStatus == 3 ">Data completely loaded</div>
                                <div ng-show=" fetchingStatus == 4 ">Duniya khatam</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="bottom-button-container">
        <div style="background-color: #cacaca;" ng-click="prev();">
            <img style="margin-right: 6px;" src="./resources/back.svg">
            BACK
        </div>
        <div style="background-color: #1daf1c;" ng-click="next();">
            NEXT
            <img style="margin-left: 6px;" src="./resources/next.svg">
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $('.carousel').carousel({
            interval: false
        });
        $('#needs-focus').focus();
        var scp = angular.element(document.getElementById('news-update-main')).scope();
        $('.carousel').on('slide.bs.carousel', function () {            
            scp.isSliding = true;
        });
        $('.carousel').on('slid.bs.carousel', function () {            
            scp.isSliding = false;
        });
    });
</script>